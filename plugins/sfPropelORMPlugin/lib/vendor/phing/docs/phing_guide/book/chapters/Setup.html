<!--
-File         $Id: Setup.html 358 2008-02-26 09:04:26Z mrook $
-License      GNU FDL (http://www.gnu.org/copyleft/fdl.html)
-Copyright    2002, turing
-Author       alex black, enigma@turingstudio.com
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/2000/REC-xhtml1-20000126/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Phing Guide - Setup</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link rel="Stylesheet" rev="Stylesheet" href="../css/Documentation.css" type="text/css" media="All" charset="iso-8859-1" />
  </head>
  <body>

<h1><a name="SettingUpPhing"></a>Setting-Up Phing</h1>

<p>The goal of this chapter is to help you obtain and correctly setup and execute
  Phing on your operating system. Once you setup Phing properly you shouldn't
  need to revisit this chapter, unless you're re-installing or moving your installation
  to another platform.</p>

<h2><a name="SystemRequirements"></a>System Requirements</h2>

<p> To use Phing you must have installed PHP version 5.0.0b1 or above compiled
  --with-libxml2, as well as --with-xsl if you want to make use of advanced functionality.
  At the time of writing PHP5.0.0b2-dev is currently unable to run Phing due to
  segmentation faults arising somewhere in the XML parsing of the build file.</p>

<p> For more information on PHP and the required modules see the PHP <a href="Bibliography.html#php">[php]</a>
  website. For a brief list of software dependencies see below. </p>

<h3><a name="OperatingSystems"></a>Operating Systems</h3>

<p> Designed for portability from the get go, Phing runs on all platforms that
  run PHP. However some advanced functionality may not work properly or is simply
  ignored on some platforms (i.e. chmod on the Windows platform). </p>

<p> To get the most out of Phing, a Unix style platform is recommended. Namely:
  Linux, FreeBSD, OpenBSD, etc. </p>

<h3><a name="SoftwareDependencies"></a>Software Dependencies</h3>

<p>For a detailed list of required sofware and libraries, refer to
the following table of Software dependencies.</p>

<p>NB: This list is not exhaustive, please refer to individual Phing tasks to
find out additional software requirements.</p>

<table>
  <caption>
  Software Dependencies
  </caption>
  <thead>
    <tr>
      <th>Software</th>
      <th>Required for</th>
      <th>Source</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>PHP 5.0.2+</td>
      <td>Execution</td>
      <td><a href="http://www.php.net">http://www.php.net</a></td>
    </tr>
    <tr>
      <td>PHPUnit2 3.2.0+</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://www.phpunit.de">http://www.phpunit.de</a></td>
    </tr>
    <tr>
      <td>Xdebug 2.0.0+</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://www.xdebug.org">http://www.xdebug.org</a></td>
    </tr>
    <tr>
      <td>PhpDocumentor 1.4.0+</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://www.phpdoc.org">http://www.phpdoc.org</a></td>
    </tr>
    <tr>
      <td>VersionControl_SVN PEAR package</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://pear.php.net">http://pear.php.net</a></td>
    </tr>
    <tr>
      <td>SimpleTest 1.0.1 beta+</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://simpletest.sourceforge.net">http://simpletest.sourceforge.net</a></td>
    </tr>
    <tr>
      <td>Creole 1.1.0+</td>
      <td>Additional functionality (task)</td>
      <td><a href="http://creole.phpdb.org">http://creole.phpdb.org</a></td>
    </tr>
    <!-- Zend Optimizer etc. could be added here... -->
  </tbody>
</table>

<p><strong>Phing does not work with safe mode enabled! </strong></p>
<h2><a name="ObtainingPhing"></a>Obtaining Phing</h2>

<p> Phing is free software distributed under the terms of the LGPL.</p>

<h3><a name="DistributionFiles"></a>Distribution Files</h3>

<p> There are several ways to get a Phing distribution package. If you do not
  want to participate in developing Phing itself it is recommended that you get
  the latest snapshot or stable packaged distribution. If you are interested in
  helping with Phing development, get a CVS revision of the files, as described
  below. </p>

<p> The easiest way to obtain the distribution package is to visit the Phing website
  <a href="Bibliography.html#phing">[phing] </a>and download the current distribution
  package in the format you desire. </p>
<p>As of version 2.0.0b1, you have the option of downloading a PEAR-installable
  package or the full phing distribution. If you wish to modify phing we suggestion
  downloading the full version so that you can (e.g.) create your own PEAR package.
  If you simply wish to use Phing for your own project or need it to build another
  package, download &amp; install the PEAR package.</p>

<h3><a name="GettingFromCVS"></a>Getting A Development Copy From CVS</h3>

<p>You are encouraged to contibute to the development of Phing. If
you want to participate in Phing development or if you are simply
intereseted in the latest features and development, obtain a CVS
copy as described in the following paragraphs.</p>

<p><strong>The CVS revisions of Phing are not bullet-proof and may
fail to execute properly on your machine. Only obtain the CVS
versions if you are absolutely aware of limitations and constraints
of such an action. Additionally you should sign up to the
development mailinglist to report and notice errors and
incompatibilities.</strong></p>

<p>We assume that you are running a Unix style operating system. So
we expect the CVS software is installed ant the <tt>cvs</tt>
executable is in your system's search path.. However, the steps for
a Windows based system are very similar. There is plenty additional
resources available on how to use CVS
<a href="Bibliography.html#cvs-howto">[cvs-howto]</a> and on CVS
speciaities on the Tigris project management platfrom
<a href="Bibliography.html#cvs-tigris">[cvs-tigris]</a>.</p>

<p>The frist thing you have to do is log onto the CVS server.
Therefore type the following line at your command promt:</p>

<pre>
 cvs -d :pserver:guest@cvs.tigris.org:/cvs login
</pre>

<p>If you signed-up as developer at the Tigris website, login with
your own password, the same as the one you use to access the site.
Or use the password "guest" with username "guest".</p>

<p>If this is the only project you working on, you only need to set
the cvsroot once. Thereafter when you log in to this domain, the
cvs repository for this project is assumed. If you are working
multiple projects, however, you must specify the cvsroot each time
you log in to ensure that the cvs repository you are accessing is
the right one.</p>

<p>To check out the project source repository an individual module
(if you don't need the entire repository), type:</p>

<pre>
cvs -d :pserver:guest@cvs.tigris.org:/cvs checkout phing
</pre>

<p>This command should result in a scrolling list of files being
added to the local directory you specified on your machine. Now you
are ready to use your favourite file editor to work with individual
files and make changes.</p>

<p>The top-level CVS module contains the Phing project website in addition to
  the phing application; the Phing files, therefore, reside in the phing/ subdirectory:</p>

<pre>
./phing/phing
</pre>
<h2><a name="Setup.PearInstall"></a>PEAR Install</h2>
<p>The easiest way to install Phing is using the PEAR installer. Provided that
  the package you downloaded is a the PEAR-ready package, you can install Phing
  simply from the command line (Unix or Windows):</p>
<pre>$&gt; pear install phing-2.0.0b1-pear.tar.gz</pre>
<p>The pear installer will check any dependencies and place the phing script (phing
  or phing.bat) into your PHP script directoy (i.e. where the &quot;pear&quot;
  script resides).</p>

<h2><a name="Setup.NonPearInstall"></a>Non-PEAR Install</h2>

<p>If you are not using the PEAR installer, you will need to setup your environment
  in order to run Phing. The distribution of Phing consists of three directories:
  <em>bin</em> , <em>docs</em> and <em>classes</em>. Only the <em>bin</em>, <em>classes</em> and
  <em>etc</em> directories are required to run Phing. To install Phing, choose
  a directory and uncompress the distribution file in that directory (you may
  already have done this in a prior step). This directory will be known as <em>PHING_HOME</em>
  .</p>

<p><strong>On Windows 95 and Windows 98, the script used to launch Phing will
  have problems if PHING_HOME is a long filepath. This is due to limitations in
  the OS's handling of the "for" batch-file statement. It is recommended, therefore,
  that Phing be installed in a short path, such as C:\opt\phing.</strong></p>

<p>Before you can run Phing there is some additional set up you
will need to do perform:</p>

<ul>
  <li>Add the full path to the <em>bin/</em> directory to your path.</li>
  <li>Set the <em>PHING_HOME</em> environment variable to the directory
      where you installed Phing. On some operating systems the Phing
      wrapper scripts can guess PHING_HOME (Unix dialects and Windows
      NT/2000). However, it is better to not rely on this behavior.</li>
  <li>Set the <em>PHP_COMMAND</em> environment variable to where your
      Php binary is located (including the binary i.e.
      PHP_COMMAND=/usr/bin/php).</li>
  <li>Set the <em>PHP_CLASSPATH</em> environment variable (see the section below).
    This should be set at least point to PHING_HOME/classes. Alternatively, you
    can also just add the phing/classes directory to your PHP include_path ini
    setting.</li>
   <li>Check your php.ini file to make sure that you have the following settings:
   	<ul>
		<li>max_execution_time = 0 <em>// unlimited execution time</em></li>
		<li>memory_limit = 32M <em>// you may need more memory depending on size of your build files</em></li>
	</ul>
   </li>
</ul>

<p>If you are using Phing in conjunction with another application, you may need
  to add additional paths to PHP_CLASSPATH.</p>

<h3><a name="Unix"></a>Unix</h3>

<p>Assuming you are running a Unix dialect operating system with
the <em>bash bourne shell</em> and Phing is
installed in <tt>/opt/phing</tt> . The following sets up the
environment properly:</p>

<pre>
  export PHP_COMMAND=/usr/bin/php
  export PHING_HOME=/opt/phing
  export PHP_CLASSPATH=${PHING_HOME}/classes
  export PATH=${PATH}:${PHING_HOME}/bin
</pre>
<h3><a name="Windows"></a>Windows</h3>

<p>On the Windows platfrom, assuming Phing is installed in
c:\opt\phing. The following sets up your environment:</p>

<pre>
  set PHP_COMMAND=c:\opt\php\php.exe
  set PHING_HOME=c:\opt\phing
  set PHP_CLASSPATH=c:\opt\phing\classes
  set PATH=%PATH%;%PHING_HOME%\bin
</pre>
<h3>Advanced</h3>

<p>There are lots of variants that can be used to run/prepare Phing. You need
  at least the following:</p>
<ul>
  <li>If you want Phing to be able to use other packages / classes, you can either
    add them to the PHP_CLASSPATH or to PHP's include_path.</li>
  <li>Some Tasks in phing/tasks/ext may require 3rd party libraries to be installed.
    Generally, tools with compatible license (and stable releases) are included
    in phing/lib so that outside dependencies can be avoided. PEAR libs will not,
    however, be bundled with Phing since they are generally bundled with PHP.
    If you are using a 3rd party task, see the Task documentation to be aware
    of any dependencies.</li>
</ul>

<p>You are now ready to use the <tt>phing</tt> command at your command prompt,
  from everywhere in your directory tree.</p>

<h2><a name="CallingPhing"></a>Calling Phing</h2>

<p>Now you are prepared to execute Phing on the command line or via
script files. The following section briefly describe how to
properly execute phing.</p>

<h3><a name="CommandLine"></a>Command Line</h3>

<p>Phing execution on the command line is simple. Just change to
the directory where your buildfile resides and type</p>

<pre>
$ phing [targetname]
</pre>

<p>at the command line (where [targetname] is the target you
want to be executed). Optionally, you may specify command line
arguments as listed in
<a href="appendixes/AppendixA-FactSheet.html#CommandLineArguments">Appendix A</a>.
</p>

  </body>
</html>

